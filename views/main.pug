extends layout.pug
include ./utilities/mixin_navbar.pug

block content

  +navbar('main')
  -function dateFormatter(string) {
    -var date = new Date(string);
    -var monthNames = [ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" ];
    -var month = monthNames[date.getMonth()];
    -var year = date.getFullYear();
    -var day = date.getDate();
    -return month+' '+day+', '+year;
  -}

  #main
    #main__stories
      each suggestionStory, index in suggestionStories
        if index === 0
          if suggestionStory.imageUrl
            img(src=suggestionStory.imageUrl, alt="Photo of a suggested article.")
          else
            img(src="https://images.unsplash.com/photo-1472162072942-cd5147eb3902?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80", alt="")
          .main-suggestion-story 
            h2= suggestionStory.title
            .subtitle= suggestionStory.subtitle
            a(href=`/stories/${suggestionStory.id}`) Read More &#9733
        else
          .suggestion-story
            .left
              a(href=`/users/${suggestionStory.userId}`)
                img(src="https://www.flaticon.com/svg/static/icons/svg/2824/2824422.svg", alt="User icon")
                span #[strong #{suggestionStory.user.fullName}] in #[strong #{suggestionStory.user.username}]
              h3= suggestionStory.title
              p #{dateFormatter(suggestionStory.createdAt)}
            .right
              img(src=suggestionStory.imageUrl, alt="Photo of a suggested article.")
      
    #main__from-following
      p.section-title Latest From Following
      .following-users-container
    .hr
    #main__trends
      p.section-title Trending on Medium
      .trending__container
        each trendingStory in trendingStories
          .trending__story
            .left
            .right
              a(href=`/users/${trendingStory.userId}`)
                span #[strong #{trendingStory.user.fullName}] in #[strong #{trendingStory.user.username}]
              a(href=`/stories/${trendingStory.userId}`)
                p= trendingStory.title
              p #{dateFormatter(trendingStory.createdAt)}

    .hr
    main#main__feeds
      .feeds-container
        .feeds-story#1 feeds story #1
        .feeds-story#2 feeds story #2
        .feeds-story#3 feeds story #3
        .feeds-story#4 feeds story #4
        .feeds-story#5 feeds story #5
        .feeds-story#6 feeds story #6
        .feeds-story#7 feeds story #7
        .feeds-story#8 feeds story #8
    aside
      #main__sidebar
        #main__readinglist
          p.section-title Reading List
        footer#main__footer footer(#main__footer)
  script.
    const profIcon = document.getElementById('navbar__prof-icon');
    const modal = document.getElementById('navbar__modal');
    profIcon.addEventListener('click', e => {
      modal.classList.toggle('hidden');
    });
  script(type="module" src="/js/main.js")